import{j as e}from"./ui-DPZ0E1vL.js";import{u as F}from"./app-CypMkPja.js";import{r as b}from"./inertia-sC_DM86S.js";import{D,a as z,b as B}from"./DialogTitle-D9yFZ6Dv.js";import{B as l,T as c,I as P,b as w}from"./Modal-CTa5naK4.js";import{B as $,S as A}from"./Schedule-C6xaM21L.js";import{C as k}from"./Close-D1G5Ogik.js";import{A as E}from"./Alert-FvNFgAts.js";import{C as h,D as L}from"./DialogActions-BpWFCt_l.js";import{T as n,F as H,I as O,S as N,a as Q}from"./TextField-shvFoP5C.js";import{P as U,M as m}from"./MenuItem-BHCu72_T.js";import{A as Y}from"./Assignment-DyNOHmmg.js";import{F as q,S as y}from"./Switch-BcopnTFx.js";import"./vendor-Y7T1HomI.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./useSlotProps-CDTHOMr-.js";import"./dividerClasses-Bqh_ZvcD.js";const ue=({open:S,onClose:p,onSubmit:I,equipment:d,maintenanceType:i})=>{const{t:o}=F(),W=(r,u)=>r.replace(/\{(\w+)\}/g,(g,C)=>u[C]!==void 0?u[C]:g),[t,M]=b.useState({scheduled_date:new Date().toISOString().split("T")[0],responsible_person:"",description:"",priority:"medium",actual_duration:0,actual_cost:0,notes:"",requires_external_service:!1,external_provider:"",parts_needed:"",work_performed:"",findings:"",recommendations:"",requires_validation:!1,next_maintenance_date:""}),[j,v]=b.useState(!1),[_,f]=b.useState(null),a={"& .MuiOutlinedInput-root":{borderRadius:"12px",fontSize:"14px","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2",borderWidth:"2px"}},"& .MuiInputLabel-root":{fontSize:"14px","&.Mui-focused":{color:"#1976d2"}}},s=(r,u)=>{M(g=>({...g,[r]:u}))},R=async()=>{if(!t.responsible_person||!t.description){f(o("qr.form.validation.required_fields"));return}v(!0),f(null);const r={maintenance_type_name:i.name,maintenance_category:i.category,...t};try{await I(r)}catch(u){f(u.message||o("qr.form.error.create_task"))}finally{v(!1)}},x=r=>{switch(r){case"low":return"#4CAF50";case"medium":return"#FF9800";case"high":return"#FF5722";case"critical":return"#F44336";default:return"#9E9E9E"}};return e.jsxs(D,{open:S,onClose:p,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.15)",maxHeight:"95vh",height:"auto"}},children:[e.jsxs(z,{sx:{background:`linear-gradient(135deg, ${i.color}15 0%, ${i.color}25 100%)`,color:i.color,display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"12px 12px 0 0",py:2.5,borderBottom:`3px solid ${i.color}`},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx($,{sx:{fontSize:28}}),e.jsxs(l,{children:[e.jsx(c,{variant:"h6",component:"div",sx:{fontWeight:600},children:i.name}),e.jsxs(c,{variant:"body2",sx:{opacity:.8},children:[d.instrument," - ",d.model]})]})]}),e.jsx(P,{onClick:p,sx:{color:i.color},children:e.jsx(k,{})})]}),e.jsxs(B,{sx:{p:3,backgroundColor:"#fafafa",overflowY:"auto",maxHeight:"calc(95vh - 180px)"},children:[_&&e.jsx(E,{severity:"error",sx:{mb:3,borderRadius:2},children:_}),e.jsxs(l,{sx:{mb:3,p:2,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsx(c,{variant:"subtitle1",sx:{fontWeight:600,mb:1,color:"#333"},children:W(o("qr.form.equipment.info"),{id:d.id})}),e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(h,{label:d.instrument,variant:"outlined",size:"small",color:"primary"}),e.jsx(h,{label:`${d.brand} ${d.model}`,variant:"outlined",size:"small"}),e.jsx(h,{label:`S/N: ${d.serial_number}`,variant:"outlined",size:"small"}),e.jsx(h,{label:i.category.toUpperCase(),sx:{backgroundColor:`${i.color}15`,color:i.color,fontWeight:600},size:"small"})]})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:3},children:[e.jsxs(l,{sx:{backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(A,{sx:{color:"#666",fontSize:20}}),e.jsx(c,{variant:"subtitle1",sx:{fontWeight:600,color:"#333"},children:o("qr.form.section.scheduling")})]}),e.jsx(n,{label:o("qr.form.field.scheduled_date"),type:"date",value:t.scheduled_date,onChange:r=>s("scheduled_date",r.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,sx:a})]}),e.jsxs(l,{sx:{backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(U,{sx:{color:"#666",fontSize:20}}),e.jsx(c,{variant:"subtitle1",sx:{fontWeight:600,color:"#333"},children:o("qr.form.section.responsibility")})]}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(n,{label:o("qr.form.field.responsible_person"),value:t.responsible_person,onChange:r=>s("responsible_person",r.target.value),fullWidth:!0,sx:a}),e.jsxs(H,{fullWidth:!0,sx:a,children:[e.jsx(O,{children:o("qr.form.field.priority")}),e.jsxs(N,{value:t.priority,onChange:r=>s("priority",r.target.value),label:o("qr.form.field.priority"),children:[e.jsx(m,{value:"low",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:x("low")}}),o("qr.form.priority.low")]})}),e.jsx(m,{value:"medium",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:x("medium")}}),o("qr.form.priority.medium")]})}),e.jsx(m,{value:"high",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:x("high")}}),o("qr.form.priority.high")]})}),e.jsx(m,{value:"critical",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:x("critical")}}),o("qr.form.priority.critical")]})})]})]})]})]})]}),e.jsxs(l,{sx:{mt:3,backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(Y,{sx:{color:"#666",fontSize:20}}),e.jsx(c,{variant:"subtitle1",sx:{fontWeight:600,color:"#333"},children:o("qr.form.section.details")})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:2},children:[e.jsx(n,{label:o("qr.form.field.description"),value:t.description,onChange:r=>s("description",r.target.value),multiline:!0,rows:3,fullWidth:!0,sx:{...a,gridColumn:"span 2"}}),e.jsx(n,{label:o("qr.form.field.actual_duration"),type:"number",value:t.actual_duration,onChange:r=>s("actual_duration",parseInt(r.target.value)||0),fullWidth:!0,sx:a}),e.jsx(n,{label:o("qr.form.field.actual_cost"),type:"number",value:t.actual_cost,onChange:r=>s("actual_cost",parseFloat(r.target.value)||0),fullWidth:!0,sx:a}),e.jsx(n,{label:o("qr.form.field.work_performed"),value:t.work_performed,onChange:r=>s("work_performed",r.target.value),multiline:!0,rows:2,fullWidth:!0,sx:{...a,gridColumn:"span 2"},placeholder:o("qr.form.field.work_performed_placeholder")}),e.jsx(n,{label:o("qr.form.field.findings"),value:t.findings,onChange:r=>s("findings",r.target.value),multiline:!0,rows:2,fullWidth:!0,sx:{...a,gridColumn:"span 2"},placeholder:o("qr.form.field.findings_placeholder")}),e.jsx(n,{label:o("qr.form.field.recommendations"),value:t.recommendations,onChange:r=>s("recommendations",r.target.value),multiline:!0,rows:2,fullWidth:!0,sx:{...a,gridColumn:"span 2"},placeholder:o("qr.form.field.recommendations_placeholder")})]})]}),e.jsxs(l,{sx:{mt:3,backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsx(q,{control:e.jsx(y,{checked:t.requires_external_service,onChange:r=>s("requires_external_service",r.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.color},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.color}}}),label:o("qr.form.switch.requires_external_service")}),t.requires_external_service&&e.jsxs(l,{sx:{mt:2,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:2},children:[e.jsx(n,{label:o("qr.form.field.external_provider"),value:t.external_provider,onChange:r=>s("external_provider",r.target.value),fullWidth:!0,sx:a}),e.jsx(n,{label:o("qr.form.field.parts_needed"),value:t.parts_needed,onChange:r=>s("parts_needed",r.target.value),fullWidth:!0,sx:a})]})]}),e.jsx(l,{sx:{mt:3},children:e.jsx(n,{label:o("qr.form.field.notes"),value:t.notes,onChange:r=>s("notes",r.target.value),multiline:!0,rows:3,fullWidth:!0,sx:{...a,backgroundColor:"white"}})}),e.jsxs(l,{sx:{mt:3,backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsx(c,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#333"},children:o("qr.form.section.validation")}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(q,{control:e.jsx(y,{checked:t.requires_validation,onChange:r=>s("requires_validation",r.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.color},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.color}}}),label:o("qr.form.switch.requires_validation")}),e.jsx(n,{label:o("qr.form.field.next_maintenance_date"),type:"date",value:t.next_maintenance_date,onChange:r=>s("next_maintenance_date",r.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,sx:a,helperText:o("qr.form.field.next_maintenance_helper")})]})]})]}),e.jsxs(L,{sx:{px:3,py:2,backgroundColor:"#fafafa"},children:[e.jsx(w,{onClick:p,variant:"outlined",startIcon:e.jsx(k,{}),sx:{borderRadius:"25px",px:5,py:1.2,textTransform:"uppercase",borderColor:"#1976D2",color:"#1976D2",fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.5px","&:hover":{borderColor:"#1976D2",backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:o("qr.form.button.cancel")}),e.jsx(w,{onClick:R,disabled:j,variant:"contained",startIcon:e.jsx(Q,{}),sx:{borderRadius:2,px:3,textTransform:"none",backgroundColor:i.color,"&:hover":{backgroundColor:i.color,filter:"brightness(0.9)"},"&:disabled":{backgroundColor:"#ccc"}},children:o(j?"qr.form.button.creating":"qr.form.button.create")})]})]})};export{ue as default};
