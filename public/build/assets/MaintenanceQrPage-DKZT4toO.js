import{j as a}from"./ui-Cj8tNzmz.js";import{u as be}from"./app-C407sp3e.js";import{r as p,a as Q,H as Ie}from"./inertia-C4EOeDop.js";import _e from"./MaintenanceTypesModal-DcaO0fNS.js";import ke from"./QrMaintenanceFormModal-BN5Zll_B.js";import{u as K,c as D,a as ae,k as te,B as c,P as X,T as x,I as Re,b as Y}from"./Modal-CNzxI3bH.js";import{c as ge}from"./clsx-B-dksMZM.js";import{c as B,g as xe,a as ve,u as he,s as k,b as ye,m as N,d as M,C as Te}from"./Close-N_b2r1ZG.js";import{Q as ze}from"./QrCode-D5-lIuoG.js";import{C as V}from"./DialogActions-Uv7Ck0Ei.js";import{A as ce,P as Fe,M as U}from"./MenuItem-DNcu_ohM.js";import{u as Ae}from"./useSlotProps-v7Knv6_8.js";import{A as le}from"./Assignment-DIqxAWIJ.js";import{C as Le,a as $e}from"./CardContent-BR39d53G.js";import{F as Ee,I as De,S as Be,a as Ne,T as We}from"./TextField-CdDEwa1V.js";import{S as de}from"./Schedule-DhkilyKX.js";import{E as Oe}from"./Edit-DCuva4FT.js";import{F as Ve}from"./Fab-B1qQfKW2.js";import{A as Ue}from"./Add-DoKFnfuI.js";import"./vendor-Y7T1HomI.js";/* empty css            */import"./DialogTitle-sibcV60X.js";import"./Switch-BrIY1zEi.js";import"./dividerClasses-BaHv2y2B.js";function He(){const{t:e}=be();return{translateMaintenanceTypeName:o=>{if(!o)return"";const d={"Mantenimiento Preventivo Rutinario":e("qr.maintenance.types.preventive_routine"),"Mantenimiento Preventivo Profundo":e("qr.maintenance.types.preventive_deep"),"Mantenimiento Correctivo":e("qr.maintenance.types.corrective_repair"),"Limpieza Especializada":e("qr.maintenance.types.specialized_cleaning"),Calibración:e("qr.maintenance.types.calibration"),Validación:e("qr.maintenance.types.validation"),Reparación:e("qr.maintenance.types.repair"),Verificación:e("qr.maintenance.types.verification"),Inspección:e("qr.maintenance.types.inspection"),Limpieza:e("qr.maintenance.types.cleaning"),"Preventive Routine Maintenance":e("qr.maintenance.types.preventive_routine"),"Routine Preventive Maintenance":e("qr.maintenance.types.preventive_routine"),"Deep Preventive Maintenance":e("qr.maintenance.types.preventive_deep"),"Corrective Maintenance":e("qr.maintenance.types.corrective_repair"),"Corrective Repair":e("qr.maintenance.types.corrective_repair"),"Specialized Cleaning":e("qr.maintenance.types.specialized_cleaning"),Calibration:e("qr.maintenance.types.calibration"),Validation:e("qr.maintenance.types.validation"),Repair:e("qr.maintenance.types.repair"),Verification:e("qr.maintenance.types.verification"),Inspection:e("qr.maintenance.types.inspection"),Cleaning:e("qr.maintenance.types.cleaning"),preventivo:e("qr.maintenance.types.preventive"),correctivo:e("qr.maintenance.types.corrective"),calibracion:e("qr.maintenance.types.calibration"),calibración:e("qr.maintenance.types.calibration"),validacion:e("qr.maintenance.types.validation"),validación:e("qr.maintenance.types.validation"),limpieza:e("qr.maintenance.types.cleaning"),reparacion:e("qr.maintenance.types.repair"),reparación:e("qr.maintenance.types.repair"),verificacion:e("qr.maintenance.types.verification"),verificación:e("qr.maintenance.types.verification"),inspeccion:e("qr.maintenance.types.inspection"),inspección:e("qr.maintenance.types.inspection")};if(d[o])return d[o];const u=o.toLowerCase();for(const[l,m]of Object.entries(d))if(l.toLowerCase().includes(u)||u.includes(l.toLowerCase()))return m;return o},translateMaintenanceResult:o=>o?{Completado:e("db.status.completed"),Programado:e("db.status.scheduled"),"En Proceso":e("db.status.in_progress"),Cancelado:e("db.status.cancelled"),Pospuesto:e("db.status.postponed"),Completed:e("db.status.completed"),Scheduled:e("db.status.scheduled"),"In Progress":e("db.status.in_progress"),Cancelled:e("db.status.cancelled"),Postponed:e("db.status.postponed"),completed:e("db.status.completed"),scheduled:e("db.status.scheduled"),in_progress:e("db.status.in_progress"),cancelled:e("db.status.cancelled"),postponed:e("db.status.postponed")}[o]||o:"",translateMaintenanceAction:o=>o?{"Mantenimiento Preventivo":e("db.action.preventive_maintenance"),"Mantenimiento Correctivo":e("db.action.corrective_maintenance"),Calibración:e("db.action.calibration"),Verificación:e("db.action.verification"),Inspección:e("db.action.inspection"),Limpieza:e("db.action.cleaning"),Reparación:e("db.action.repair"),"Preventive Maintenance":e("db.action.preventive_maintenance"),"Corrective Maintenance":e("db.action.corrective_maintenance"),Calibration:e("db.action.calibration"),Verification:e("db.action.verification"),Inspection:e("db.action.inspection"),Cleaning:e("db.action.cleaning"),Repair:e("db.action.repair")}[o]||o:""}}const pe=B(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"})),ue=B(a.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),me=B(a.jsx("path",{d:"M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m13.1-8.16c.01-.11.02-.22.02-.34s-.01-.23-.03-.34l.74-.58c.07-.05.08-.15.04-.22l-.7-1.21c-.04-.08-.14-.1-.21-.08l-.86.35c-.18-.14-.38-.25-.59-.34l-.13-.93c-.02-.09-.09-.15-.18-.15h-1.4c-.09 0-.16.06-.17.15l-.13.93c-.21.09-.41.21-.59.34l-.87-.35c-.08-.03-.17 0-.21.08l-.7 1.21c-.04.08-.03.17.04.22l.74.58c-.02.11-.03.23-.03.34s.01.23.03.34l-.74.58c-.07.05-.08.15-.04.22l.7 1.21c.04.08.14.1.21.08l.87-.35c.18.14.38.25.59.34l.13.93c.01.09.08.15.17.15h1.4c.09 0 .16-.06.17-.15l.13-.93c.21-.09.41-.21.59-.34l.87.35c.08.03.17 0 .21-.08l.7-1.21c.04-.08.03-.17-.04-.22zm-2.6.91c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25m.42 3.93-.5-.87c-.03-.06-.1-.08-.15-.06l-.62.25q-.195-.15-.42-.24l-.09-.66c-.02-.06-.08-.1-.14-.1h-1c-.06 0-.11.04-.12.11l-.09.66c-.15.06-.29.15-.42.24l-.62-.25c-.06-.02-.12 0-.15.06l-.5.87c-.03.06-.02.12.03.16l.53.41c-.01.08-.02.16-.02.24s.01.17.02.24l-.53.41c-.05.04-.06.11-.03.16l.5.87c.03.06.1.08.15.06l.62-.25q.195.15.42.24l.09.66c.01.07.06.11.12.11h1c.06 0 .12-.04.12-.11l.09-.66c.15-.06.29-.15.42-.24l.62.25c.06.02.12 0 .15-.06l.5-.87c.03-.06.02-.12-.03-.16l-.52-.41c.01-.08.02-.16.02-.24s-.01-.17-.02-.24l.53-.41c.05-.04.06-.11.04-.17m-2.42 1.65c-.46 0-.83-.38-.83-.83 0-.46.38-.83.83-.83s.83.38.83.83c0 .46-.37.83-.83.83M4.74 9h8.53c.27 0 .49-.22.49-.49v-.02c0-.27-.22-.49-.49-.49H13c0-1.48-.81-2.75-2-3.45v.95c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.14C9.68 4.06 9.35 4 9 4s-.68.06-1 .14V5.5c0 .28-.22.5-.5.5S7 5.78 7 5.5v-.95C5.81 5.25 5 6.52 5 8h-.26c-.27 0-.49.22-.49.49v.03c0 .26.22.48.49.48M9 13c1.86 0 3.41-1.28 3.86-3H5.14c.45 1.72 2 3 3.86 3"})),Qe=B(a.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Ke=B(a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Xe(e){return xe("MuiAvatar",e)}ve("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ye=e=>{const{classes:t,variant:s,colorDefault:n}=e;return ye({root:["root",s,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Xe,t)},Ge=k("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],s.colorDefault&&t.colorDefault]}})(N(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),Je=k("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ze=k(Ke,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function ea({crossOrigin:e,referrerPolicy:t,src:s,srcSet:n}){const[o,d]=p.useState(!1);return p.useEffect(()=>{if(!s&&!n)return;d(!1);let u=!0;const l=new Image;return l.onload=()=>{u&&d("loaded")},l.onerror=()=>{u&&d("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=s,n&&(l.srcset=n),()=>{u=!1}},[e,t,s,n]),o}const fe=p.forwardRef(function(t,s){const n=he({props:t,name:"MuiAvatar"}),{alt:o,children:d,className:u,component:l="div",slots:m={},slotProps:g={},imgProps:f,sizes:S,src:b,srcSet:h,variant:v="circular",...y}=n;let q=null;const w={...n,component:l,variant:v},F=ea({...f,...typeof g.img=="function"?g.img(w):g.img,src:b,srcSet:h}),A=b||h,R=A&&F!=="error";w.colorDefault=!R,delete w.ownerState;const L=Ye(w),[W,H]=K("root",{ref:s,className:ge(L.root,u),elementType:Ge,externalForwardedProps:{slots:m,slotProps:g,component:l,...y},ownerState:w}),[$,T]=K("img",{className:L.img,elementType:Je,externalForwardedProps:{slots:m,slotProps:{img:{...f,...g.img}}},additionalProps:{alt:o,src:b,srcSet:h,sizes:S},ownerState:w}),[z,P]=K("fallback",{className:L.fallback,elementType:Ze,externalForwardedProps:{slots:m,slotProps:g},shouldForwardComponentProp:!0,ownerState:w});return R?q=a.jsx($,{...T}):d||d===0?q=d:A&&o?q=o[0]:q=a.jsx(z,{...P}),a.jsx(W,{...H,children:q})});function aa(e){return xe("MuiLinearProgress",e)}ve("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const G=4,J=te`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,ta=typeof J!="string"?ae`
        animation: ${J} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,Z=te`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,ra=typeof Z!="string"?ae`
        animation: ${Z} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,ee=te`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,na=typeof ee!="string"?ae`
        animation: ${ee} 3s infinite linear;
      `:null,sa=e=>{const{classes:t,variant:s,color:n}=e,o={root:["root",`color${M(n)}`,s],dashed:["dashed",`dashedColor${M(n)}`],bar1:["bar","bar1",`barColor${M(n)}`,(s==="indeterminate"||s==="query")&&"bar1Indeterminate",s==="determinate"&&"bar1Determinate",s==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",s!=="buffer"&&`barColor${M(n)}`,s==="buffer"&&`color${M(n)}`,(s==="indeterminate"||s==="query")&&"bar2Indeterminate",s==="buffer"&&"bar2Buffer"]};return ye(o,aa,t)},re=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.5),ia=k("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`color${M(s.color)}`],t[s.variant]]}})(N(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(D()).map(([t])=>({props:{color:t},style:{backgroundColor:re(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),oa=k("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.dashed,t[`dashedColor${M(s.color)}`]]}})(N(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(D()).map(([t])=>{const s=re(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${s} 0%, ${s} 16%, transparent 42%)`}}})]})),na||{animation:`${ee} 3s infinite linear`}),ca=k("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.bar,t.bar1,t[`barColor${M(s.color)}`],(s.variant==="indeterminate"||s.variant==="query")&&t.bar1Indeterminate,s.variant==="determinate"&&t.bar1Determinate,s.variant==="buffer"&&t.bar1Buffer]}})(N(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(D()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${G}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${G}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:ta||{animation:`${J} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),la=k("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.bar,t.bar2,t[`barColor${M(s.color)}`],(s.variant==="indeterminate"||s.variant==="query")&&t.bar2Indeterminate,s.variant==="buffer"&&t.bar2Buffer]}})(N(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(D()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(D()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:re(e,t),transition:`transform .${G}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:ra||{animation:`${Z} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),da=p.forwardRef(function(t,s){const n=he({props:t,name:"MuiLinearProgress"}),{className:o,color:d="primary",value:u,valueBuffer:l,variant:m="indeterminate",...g}=n,f={...n,color:d,variant:m},S=sa(f),b=Ae(),h={},v={bar1:{},bar2:{}};if((m==="determinate"||m==="buffer")&&u!==void 0){h["aria-valuenow"]=Math.round(u),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let y=u-100;b&&(y=-y),v.bar1.transform=`translateX(${y}%)`}if(m==="buffer"&&l!==void 0){let y=(l||0)-100;b&&(y=-y),v.bar2.transform=`translateX(${y}%)`}return a.jsxs(ia,{className:ge(S.root,o),ownerState:f,role:"progressbar",...h,ref:s,...g,children:[m==="buffer"?a.jsx(oa,{className:S.dashed,ownerState:f}):null,a.jsx(ca,{className:S.bar1,ownerState:f,style:v.bar1}),m==="determinate"?null:a.jsx(la,{className:S.bar2,ownerState:f,style:v.bar2})]})}),Aa=({equipment:e,qrToken:t,maintenanceTypes:s})=>{const{t:n,language:o}=be(),{translateMaintenanceTypeName:d}=He(),u=(r,i)=>r.replace(/\{(\w+)\}/g,(j,C)=>i[C]!==void 0?i[C]:j),[l,m]=p.useState(e.maintenance_records||e.maintenanceRecords||[]),[g,f]=p.useState(!1),[S,b]=p.useState(null),[h,v]=p.useState(null),[y,q]=p.useState(!1),[w,F]=p.useState(!1),[A,R]=p.useState(null),[L,W]=p.useState(new Set),[H,$]=p.useState(null),[T,z]=p.useState("scheduled"),[P,O]=p.useState("");p.useEffect(()=>{const r=setInterval(()=>{E()},3e4);return()=>clearInterval(r)},[]);const E=async()=>{try{f(!0);const r=await Q.get(`/qr-maintenance/${t}`);if(r.data.props){const i=r.data.props.equipment,j=i.maintenance_records||i.maintenanceRecords||[];m(j),console.log("Tasks refreshed:",j)}}catch(r){console.error("Error refreshing tasks:",r)}finally{f(!1)}},Ce=async(r,i,j={})=>{f(!0),b(null),m(C=>C.map(_=>_.id===r?{..._,status:i,...j}:_));try{const C=await Q.patch(`/qr-maintenance/${t}/task/${r}`,{status:i,...j});C.data.success&&(i==="completed"&&(W(_=>new Set([..._,r])),setTimeout(()=>{W(_=>{const oe=new Set(_);return oe.delete(r),oe})},2e3)),v(C.data.message),await E(),setTimeout(()=>{v(null)},3e3))}catch(C){await E(),b(C.response?.data?.message||n("qr.maintenance.error.update_task")),setTimeout(()=>{b(null)},5e3)}finally{f(!1)}},je=async r=>{f(!0),b(null);try{const i=await Q.post(`/qr-maintenance/${t}/create-task`,r);i.data.success&&(v(i.data.message),await E(),q(!1),R(null),setTimeout(()=>{v(null)},3e3))}catch(i){b(i.response?.data?.message||n("qr.maintenance.error.create_task")),setTimeout(()=>{b(null)},5e3)}finally{f(!1)}},Se=r=>{R(r),F(!1),q(!0)},qe=(r,i)=>{$(r),z(i),O("")},we=()=>{$(null),z("scheduled"),O("")},Me=async r=>{const i={notes:P};if(T==="completed"){i.work_performed=P||n("qr.maintenance.completed_via_qr"),i.findings=P||n("qr.maintenance.work_performed");const j=l.find(C=>C.id===r);j&&(i.actual_duration=j.estimated_duration)}else T==="cancelled"&&(i.work_performed=P||n("qr.maintenance.cancelled_via_qr"),i.findings=P||n("qr.maintenance.task_cancelled"));await Ce(r,T,i),$(null),z("scheduled"),O("")},ne=r=>{switch(r){case"low":return"#4CAF50";case"medium":return"#FF9800";case"high":return"#FF5722";case"critical":return"#F44336";default:return"#9E9E9E"}},I=r=>{switch(r){case"scheduled":return"#2196F3";case"in_progress":return"#FF9800";case"completed":return"#4CAF50";case"cancelled":return"#9E9E9E";default:return"#9E9E9E"}},se=r=>{switch(r){case"scheduled":return a.jsx(de,{});case"in_progress":return a.jsx(me,{});case"completed":return a.jsx(ue,{});case"cancelled":return a.jsx(pe,{});default:return a.jsx(le,{})}},Pe=r=>{const i=o==="es"?"es-CO":"en-US";return new Date(r).toLocaleDateString(i,{day:"2-digit",month:"2-digit",year:"numeric"})},ie=r=>{switch(r){case"scheduled":return n("qr.maintenance.status.scheduled");case"in_progress":return n("qr.maintenance.status.in_progress");case"completed":return n("qr.maintenance.status.completed");case"cancelled":return n("qr.maintenance.status.cancelled");default:return r}};return a.jsxs(a.Fragment,{children:[a.jsx(Ie,{title:u(n("qr.maintenance.page_title"),{equipment:e.instrument})}),a.jsxs(c,{sx:{minHeight:"100vh",background:"#f8fafc",p:{xs:2,sm:3}},children:[a.jsxs(X,{elevation:2,sx:{textAlign:"center",mb:3,p:3,borderRadius:3,background:"linear-gradient(135deg, #1976D2 0%, #1565C0 100%)",color:"white"},children:[a.jsx(x,{variant:"h4",sx:{fontWeight:700,mb:1,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n("qr.maintenance.system_title")}),a.jsx(x,{variant:"subtitle1",sx:{opacity:.9,textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:n("qr.maintenance.system_subtitle")})]}),a.jsx(X,{elevation:6,sx:{mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",border:"1px solid rgba(59, 130, 246, 0.08)"},children:a.jsxs(c,{sx:{p:3},children:[a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[a.jsx(fe,{sx:{bgcolor:"#1976D2",width:56,height:56,fontSize:"1.5rem"},children:a.jsx(ze,{})}),a.jsxs(c,{sx:{flex:1},children:[a.jsx(x,{variant:"h5",sx:{fontWeight:700,color:"#1a202c"},children:e.instrument}),a.jsxs(x,{variant:"body1",sx:{color:"#4a5568"},children:[e.brand," ",e.model," -"," ",e.int_code]}),a.jsxs(x,{variant:"body2",sx:{color:"#718096"},children:["S/N: ",e.serial_number]})]}),a.jsx(Re,{onClick:E,sx:{bgcolor:"#f7fafc","&:hover":{bgcolor:"#edf2f7"}},children:a.jsx(Qe,{})})]}),a.jsx(V,{label:e.active?n("qr.maintenance.equipment.active"):n("qr.maintenance.equipment.inactive"),color:e.active?"success":"error",sx:{fontWeight:600}})]})}),S&&a.jsx(ce,{severity:"error",sx:{mb:2,borderRadius:2},onClose:()=>b(null),children:S}),h&&a.jsx(ce,{severity:"success",sx:{mb:2,borderRadius:2},onClose:()=>v(null),children:h}),g&&a.jsx(da,{sx:{mb:2,borderRadius:1}}),a.jsxs(X,{elevation:6,sx:{borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",border:"1px solid rgba(59, 130, 246, 0.08)",overflow:"hidden"},children:[a.jsxs(c,{sx:{p:3,background:"linear-gradient(135deg, #1976D2 15%, #1565C0 85%)",color:"white"},children:[a.jsx(x,{variant:"h6",sx:{fontWeight:600},children:n("qr.maintenance.tasks.title")}),a.jsx(x,{variant:"body2",sx:{opacity:.9},children:u(n("qr.maintenance.tasks.count"),{count:l.length})})]}),a.jsx(c,{sx:{p:3},children:l.length===0?a.jsxs(c,{sx:{textAlign:"center",py:6,color:"#718096"},children:[a.jsx(le,{sx:{fontSize:64,mb:2,opacity:.5}}),a.jsx(x,{variant:"h6",sx:{mb:1},children:n("qr.maintenance.tasks.empty.title")}),a.jsx(x,{variant:"body2",children:n("qr.maintenance.tasks.empty.description")})]}):a.jsx(c,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:2},children:l.map(r=>a.jsx(c,{children:a.jsx(Le,{sx:{borderRadius:2,border:`2px solid ${I(r.status)}15`,"&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"},transition:"all 0.3s ease",...L.has(r.id)&&{background:"linear-gradient(135deg, #4CAF50 0%, #81C784 100%)",color:"white",transform:"scale(1.02)",boxShadow:"0 8px 25px rgba(76, 175, 80, 0.3)"},...r.status==="completed"&&{opacity:.8,background:"linear-gradient(135deg, #E8F5E8 0%, #F1F8E9 100%)"}},children:a.jsxs($e,{sx:{p:2.5},children:[a.jsxs(c,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:2},children:[a.jsx(fe,{sx:{bgcolor:`${I(r.status)}15`,color:I(r.status),width:40,height:40},children:se(r.status)}),a.jsxs(c,{sx:{flex:1},children:[a.jsx(x,{variant:"subtitle1",sx:{fontWeight:600,color:"#1a202c",lineHeight:1.2},children:d(r.maintenance_type_name)}),a.jsx(x,{variant:"body2",sx:{color:"#718096"},children:Pe(r.scheduled_date)})]})]}),a.jsxs(c,{sx:{display:"flex",gap:1,mb:2},children:[a.jsx(V,{label:ie(r.status),size:"small",sx:{bgcolor:`${I(r.status)}15`,color:I(r.status),fontWeight:600}}),a.jsx(V,{label:r.priority.toUpperCase(),size:"small",sx:{bgcolor:`${ne(r.priority)}15`,color:ne(r.priority),fontWeight:600}})]}),a.jsx(x,{variant:"body2",sx:{color:"#4a5568",mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[a.jsx(Fe,{sx:{fontSize:16,color:"#718096"}}),a.jsx(x,{variant:"body2",sx:{color:"#718096"},children:r.responsible_person})]}),a.jsx(c,{sx:{display:"flex",gap:1,flexWrap:"wrap",alignItems:"center"},children:H===r.id?a.jsxs(c,{sx:{width:"100%",mt:2},children:[a.jsxs(c,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[a.jsxs(Ee,{size:"small",sx:{minWidth:120},children:[a.jsx(De,{children:n("qr.maintenance.form.status_label")}),a.jsxs(Be,{value:T,onChange:i=>z(i.target.value),label:n("qr.maintenance.form.status_label"),children:[a.jsx(U,{value:"scheduled",children:a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx(de,{sx:{fontSize:16,color:"#2196F3"}}),n("qr.maintenance.status.scheduled")]})}),a.jsx(U,{value:"in_progress",children:a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx(me,{sx:{fontSize:16,color:"#FF9800"}}),n("qr.maintenance.status.in_progress")]})}),a.jsx(U,{value:"completed",children:a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx(ue,{sx:{fontSize:16,color:"#4CAF50"}}),n("qr.maintenance.status.completed")]})}),a.jsx(U,{value:"cancelled",children:a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx(pe,{sx:{fontSize:16,color:"#9E9E9E"}}),n("qr.maintenance.status.cancelled")]})})]})]}),a.jsxs(c,{sx:{display:"flex",gap:1},children:[a.jsx(Y,{size:"small",variant:"contained",startIcon:a.jsx(Ne,{}),onClick:()=>Me(r.id),disabled:g,sx:{bgcolor:"#1976D2","&:hover":{bgcolor:"#1565C0"}},children:n("qr.maintenance.actions.save")}),a.jsx(Y,{size:"small",variant:"outlined",startIcon:a.jsx(Te,{}),onClick:we,disabled:g,sx:{borderRadius:"25px",px:3,py:.8,textTransform:"uppercase",borderColor:"#1976D2",color:"#1976D2",fontWeight:600,fontSize:"0.75rem",letterSpacing:"0.5px","&:hover":{borderColor:"#1976D2",backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:n("qr.maintenance.actions.cancel")})]})]}),a.jsx(We,{label:n("qr.maintenance.form.notes_label"),multiline:!0,rows:3,fullWidth:!0,value:P,onChange:i=>O(i.target.value),placeholder:n("qr.maintenance.form.notes_placeholder"),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}):a.jsxs(a.Fragment,{children:[a.jsx(Y,{size:"small",variant:"outlined",startIcon:a.jsx(Oe,{}),onClick:()=>qe(r.id,r.status),disabled:g,sx:{borderColor:"#667eea",color:"#667eea","&:hover":{borderColor:"#5a67d8",bgcolor:"#667eea15"}},children:n("qr.maintenance.actions.edit")}),a.jsx(V,{label:ie(r.status),size:"small",icon:se(r.status),sx:{bgcolor:`${I(r.status)}15`,color:I(r.status),fontWeight:600}})]})})]})})},r.id))})})]}),a.jsx(Ve,{color:"primary","aria-label":"add task",onClick:()=>F(!0),sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg, #1976D2 0%, #1565C0 100%)","&:hover":{background:"linear-gradient(135deg, #1565C0 0%, #0D47A1 100%)",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:a.jsx(Ue,{})}),a.jsx(_e,{open:w,onClose:()=>F(!1),onSelectMaintenanceType:Se,equipment:e}),A&&a.jsx(ke,{open:y,onClose:()=>{q(!1),R(null)},equipment:e,maintenanceType:A,onSubmit:je})]})]})};export{Aa as default};
