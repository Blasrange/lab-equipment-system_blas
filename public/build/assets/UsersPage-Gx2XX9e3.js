import{j as e}from"./ui-DPZ0E1vL.js";import{R as l,H as B,b as x}from"./inertia-sC_DM86S.js";import{u as L}from"./use-translation-CoHJZkub.js";import{A}from"./app-layout-CuHuFYBB.js";import{E as H}from"./Edit-xAXkYsFL.js";import{A as O}from"./Add-BvI4CHZA.js";import{c as V}from"./Close-D1G5Ogik.js";import $ from"./CreateUsersModal-BcfbkS6G.js";import F from"./EditUsersModal-uWX5un1t.js";import{B as g}from"./createLucideIcon-DlLlIvzF.js";import{B as f,T as _,b as k,P as Y}from"./Modal-CTa5naK4.js";import{e as q,T as G,a as J,b as T,c as i,d as K}from"./TableRow-BWtQCaVH.js";import"./vendor-Y7T1HomI.js";import"./app-CypMkPja.js";/* empty css            */import"./x-Bg57hL6E.js";import"./index-9L3mPNV5.js";import"./app-logo-icon-CT6d25lK.js";import"./check-Gv2W-rkc.js";import"./clsx-B-dksMZM.js";import"./TextField-shvFoP5C.js";import"./useSlotProps-CDTHOMr-.js";import"./InputAdornment-CfS_hXAI.js";import"./Alert-FvNFgAts.js";import"./Switch-BcopnTFx.js";const Q=V(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}));function we({users:a,filters:w={}}){const{t}=L(),R=[{title:t("users.title"),href:"/users"}],[N,u]=l.useState(!1),[P,h]=l.useState(!1),[b,j]=l.useState(null),[z,y]=l.useState(a.current_page||1),[d,C]=l.useState(a.per_page||10),[n,p]=l.useState(!1);l.useEffect(()=>{a.current_page!==z&&y(a.current_page),a.per_page!==d&&C(a.per_page)},[a.current_page,a.per_page]);function E(r){if(!r)return"";const s=new Date(r);return isNaN(s.getTime())?r:s.toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"})}const W=r=>{console.log("Datos a enviar:",r);const s={name:r.name,email:r.email,password:r.password,password_confirmation:r.password_confirmation,active:r.active??!0};x.post("/users",s,{onSuccess:()=>{u(!1)},onError:v=>{console.error("Errores al crear usuario:",v)}})},U=r=>{if(!b)return;const s={name:r.name,email:r.email,active:r.active,_method:"PUT"};r.password&&(s.password=r.password,s.password_confirmation=r.password_confirmation),x.post(`/users/${b.id}`,s,{onSuccess:()=>{h(!1),j(null)},onError:v=>{console.error("Errores al actualizar usuario:",v)}})},I=r=>{j(r),h(!0)},m=async r=>{r<1||r>a.last_page||n||(p(!0),y(r),await x.get("/users",{page:r,per_page:d,...w},{preserveState:!0,preserveUrl:!0,replace:!1,only:["users","filters"]}),p(!1))},M=async r=>{const s=Number(r.target.value);C(s),y(1),p(!0),await x.get("/users",{page:1,per_page:s,...w},{preserveState:!0,preserveUrl:!0,replace:!1,only:["users","filters"]}),p(!1)},S=a.total,c=a.last_page,o=a.current_page;return e.jsxs(A,{breadcrumbs:R,children:[e.jsx(B,{title:t("users.title")}),e.jsxs("div",{className:"flex w-full flex-col items-center px-2 py-4 md:px-8 md:py-8",children:[e.jsxs("div",{className:"mb-6 flex w-full items-center justify-between",children:[e.jsxs(f,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(f,{sx:{width:48,height:48,borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.3)"},children:e.jsx(Q,{sx:{color:"white",fontSize:28}})}),e.jsx(_,{variant:"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:t("users.title")})]}),e.jsx(k,{variant:"contained",color:"primary",startIcon:e.jsx(O,{}),onClick:()=>u(!0),sx:{borderRadius:3,fontWeight:"bold",textTransform:"none",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.3)",px:2.5,py:1,height:40,"&:hover":{background:"linear-gradient(135deg, #2563eb 0%, #1e40af 100%)",boxShadow:"0 6px 25px rgba(59, 130, 246, 0.4)",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:t("users.add")})]}),e.jsx(f,{sx:{width:"100%",maxWidth:"100%"},children:e.jsx(Y,{elevation:6,sx:{borderRadius:4,background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",px:2,py:1,mb:2,border:"1px solid rgba(59, 130, 246, 0.1)"},children:e.jsx(q,{className:"w-full max-w-full overflow-x-auto",children:e.jsxs(G,{"aria-label":"users table",className:"min-w-[50px]",children:[e.jsx(J,{sx:{backgroundColor:"#f5f5f5","& .MuiTableCell-root":{"&:first-of-type":{borderTopLeftRadius:"16px"},"&:last-of-type":{borderTopRightRadius:"16px"}}},children:e.jsxs(T,{children:[e.jsx(i,{align:"center",sx:{fontWeight:"bold",fontSize:"1rem",color:"#333"},children:t("users.name")}),e.jsx(i,{align:"center",sx:{fontWeight:"bold",fontSize:"1rem",color:"#333"},children:t("users.email")}),e.jsx(i,{align:"center",sx:{fontWeight:"bold",fontSize:"1rem",color:"#333"},children:t("users.created_at")}),e.jsx(i,{align:"center",sx:{fontWeight:"bold",fontSize:"1rem",color:"#333"},children:t("users.status")}),e.jsx(i,{align:"center",sx:{fontWeight:"bold",fontSize:"1rem",color:"#333"},children:t("users.actions")})]})}),e.jsx(K,{children:a.data.map(r=>e.jsxs(T,{sx:{"&:hover":{backgroundColor:"rgba(59, 130, 246, 0.05)",transform:"scale(1.001)",transition:"all 0.2s ease-in-out"}},children:[e.jsx(i,{component:"th",scope:"row",align:"center",children:e.jsx(_,{variant:"body2",sx:{fontWeight:"medium"},children:r.name})}),e.jsx(i,{align:"center",children:r.email}),e.jsx(i,{align:"center",children:E(r.created_at)}),e.jsx(i,{align:"center",children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",backgroundColor:r.active?"#4caf50":"#f44336",color:"white",fontSize:"0.875rem"},children:r.active?t("status.active"):t("status.inactive")})}),e.jsx(i,{align:"center",children:e.jsx(f,{sx:{display:"flex",gap:1,justifyContent:"center"},children:e.jsx(k,{variant:"outlined",size:"small",color:"primary",startIcon:e.jsx(H,{}),onClick:()=>I(r),sx:{borderRadius:2,fontWeight:"bold",textTransform:"none"},children:t("users.edit")})})})]},r.id))})]})})})}),S>d&&e.jsxs("div",{className:"mt-6 flex w-full items-center justify-between px-2",style:{minHeight:40},children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[t("common.pagination.showing")," ",a.from??0," ",t("common.pagination.to")," ",a.to??0," ",t("common.pagination.of")," ",S," ",t("common.pagination.entries")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>m(1),disabled:o===1||n,className:"rounded-lg border-gray-300 px-3 py-1 text-xs hover:bg-gray-50",children:n&&o===1?"...":"<<"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>m(o-1),disabled:o===1||n,className:"rounded-lg border-gray-300 px-3 py-1 text-xs hover:bg-gray-50",children:n&&o===o-1?"...":"<"}),e.jsx("span",{className:"mx-2 min-w-[24px] text-center text-sm font-medium",children:o}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>m(o+1),disabled:o===c||c===0||n,className:"rounded-lg border-gray-300 px-3 py-1 text-xs hover:bg-gray-50",children:n&&o===o+1?"...":">"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>m(c),disabled:o===c||c===0||n,className:"rounded-lg border-gray-300 px-3 py-1 text-xs hover:bg-gray-50",children:n&&o===c?"...":">>"}),e.jsx("select",{value:d,onChange:M,disabled:n,className:"ml-2 rounded-lg border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none",children:[5,10,25,50].map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsx($,{open:N,onClose:()=>u(!1),onCreate:W}),e.jsx(F,{open:P,onClose:()=>{h(!1),j(null)},onUpdate:U,user:b})]})]})}export{we as default};
