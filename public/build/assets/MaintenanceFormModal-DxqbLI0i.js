import{j as e}from"./ui-DPZ0E1vL.js";import{u as D}from"./app-CypMkPja.js";import{r as j,b as E}from"./inertia-sC_DM86S.js";import{D as M,a as z,b as B}from"./DialogTitle-D9yFZ6Dv.js";import{B as r,T as x,I as A,b as _}from"./Modal-CTa5naK4.js";import{B as P,S as $}from"./Schedule-C6xaM21L.js";import{C as y}from"./Close-D1G5Ogik.js";import{A as L}from"./Alert-FvNFgAts.js";import{C as f,D as O}from"./DialogActions-BpWFCt_l.js";import{T as l,F as w,I as k,S as I,a as H}from"./TextField-shvFoP5C.js";import{P as N,M as d}from"./MenuItem-BHCu72_T.js";import{A as U}from"./Assignment-DyNOHmmg.js";import{F as Y,S as q}from"./Switch-BcopnTFx.js";import"./vendor-Y7T1HomI.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./useSlotProps-CDTHOMr-.js";import"./dividerClasses-Bqh_ZvcD.js";const ce=({open:S,onClose:m,equipment:c,maintenanceType:t})=>{const{t:s}=D(),[o,W]=j.useState({scheduled_date:new Date().toISOString().split("T")[0],performed_date:"",responsible_person:"",description:"",priority:"medium",actual_duration:0,actual_cost:0,notes:"",requires_external_service:!1,external_provider:"",parts_needed:"",status:"scheduled"}),[v,p]=j.useState(!1),[C,b]=j.useState(null),n={"& .MuiOutlinedInput-root":{borderRadius:"12px",fontSize:"14px","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2",borderWidth:"2px"}},"& .MuiInputLabel-root":{fontSize:"14px","&.Mui-focused":{color:"#1976d2"}}},i=(a,g)=>{W(F=>({...F,[a]:g}))},R=()=>{if(!o.responsible_person||!o.description){b(s("maintenance.form.required_fields"));return}p(!0),b(null);const a={equipment_id:c.id,maintenance_type_name:t.name,maintenance_category:t.category,...o};E.post("/maintenance",a,{onSuccess:()=>{p(!1),m()},onError:g=>{p(!1),b(s("maintenance.form.save_error")+Object.values(g).join(", ")),console.error(g)},onFinish:()=>{p(!1)}})},h=a=>{switch(a){case"low":return"#4CAF50";case"medium":return"#FF9800";case"high":return"#FF5722";case"critical":return"#F44336";default:return"#9E9E9E"}},u=a=>{switch(a){case"scheduled":return"#2196F3";case"in_progress":return"#FF9800";case"completed":return"#4CAF50";case"cancelled":return"#9E9E9E";case"postponed":return"#9C27B0";default:return"#9E9E9E"}};return e.jsxs(M,{open:S,onClose:m,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.15)",maxHeight:"90vh"}},children:[e.jsxs(z,{sx:{background:`linear-gradient(135deg, ${t.color}15 0%, ${t.color}25 100%)`,color:t.color,display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"12px 12px 0 0",py:2.5,borderBottom:`3px solid ${t.color}`},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(P,{sx:{fontSize:28}}),e.jsxs(r,{children:[e.jsx(x,{variant:"h6",component:"div",sx:{fontWeight:600},children:t.name}),e.jsxs(x,{variant:"body2",sx:{opacity:.8},children:[c.instrument," - ",c.model]})]})]}),e.jsx(A,{onClick:m,sx:{color:t.color},children:e.jsx(y,{})})]}),e.jsxs(B,{sx:{p:3,backgroundColor:"#fafafa"},children:[C&&e.jsx(L,{severity:"error",sx:{mb:3,borderRadius:2},children:C}),e.jsxs(r,{sx:{mb:3,p:2,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600,mb:1,color:"#333"},children:s("maintenance.form.equipment_info").replace("{id}",c.id.toString())}),e.jsxs(r,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(f,{label:c.instrument,variant:"outlined",size:"small",color:"primary"}),e.jsx(f,{label:`${c.brand} ${c.model}`,variant:"outlined",size:"small"}),e.jsx(f,{label:`S/N: ${c.serial_number}`,variant:"outlined",size:"small"}),e.jsx(f,{label:t.category.toUpperCase(),sx:{backgroundColor:`${t.color}15`,color:t.color,fontWeight:600},size:"small"})]})]}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:3},children:[e.jsxs(r,{sx:{backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx($,{sx:{color:"#666",fontSize:20}}),e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600,color:"#333"},children:s("maintenance.form.scheduling")})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(l,{label:s("maintenance.form.scheduled_date"),type:"date",value:o.scheduled_date,onChange:a=>i("scheduled_date",a.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,sx:n}),e.jsx(l,{label:s("maintenance.form.performed_date"),type:"date",value:o.performed_date,onChange:a=>i("performed_date",a.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,sx:n})]})]}),e.jsxs(r,{sx:{backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(N,{sx:{color:"#666",fontSize:20}}),e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600,color:"#333"},children:s("maintenance.form.responsibility")})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(l,{label:s("maintenance.form.responsible_person"),value:o.responsible_person,onChange:a=>i("responsible_person",a.target.value),fullWidth:!0,sx:n}),e.jsxs(w,{fullWidth:!0,sx:n,children:[e.jsx(k,{children:s("maintenance.form.priority")}),e.jsxs(I,{value:o.priority,onChange:a=>i("priority",a.target.value),label:s("maintenance.form.priority"),children:[e.jsx(d,{value:"low",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:h("low")}}),s("maintenance.form.priority.low")]})}),e.jsx(d,{value:"medium",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:h("medium")}}),s("maintenance.form.priority.medium")]})}),e.jsx(d,{value:"high",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:h("high")}}),s("maintenance.form.priority.high")]})}),e.jsx(d,{value:"critical",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:h("critical")}}),s("maintenance.form.priority.critical")]})})]})]})]})]})]}),e.jsxs(r,{sx:{mt:3,backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(U,{sx:{color:"#666",fontSize:20}}),e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600,color:"#333"},children:s("maintenance.form.details")})]}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:2},children:[e.jsx(l,{label:s("maintenance.form.description"),value:o.description,onChange:a=>i("description",a.target.value),multiline:!0,rows:3,fullWidth:!0,sx:{...n,gridColumn:"span 2"}}),e.jsx(l,{label:s("maintenance.form.actual_duration"),type:"number",value:o.actual_duration,onChange:a=>i("actual_duration",parseInt(a.target.value)||0),fullWidth:!0,sx:n}),e.jsx(l,{label:s("maintenance.form.actual_cost"),type:"number",value:o.actual_cost,onChange:a=>i("actual_cost",parseFloat(a.target.value)||0),fullWidth:!0,sx:n}),e.jsxs(w,{fullWidth:!0,sx:n,children:[e.jsx(k,{children:s("maintenance.form.status")}),e.jsxs(I,{value:o.status,onChange:a=>i("status",a.target.value),label:s("maintenance.form.status"),children:[e.jsx(d,{value:"scheduled",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:u("scheduled")}}),s("maintenance.form.status.scheduled")]})}),e.jsx(d,{value:"in_progress",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:u("in_progress")}}),s("maintenance.form.status.in_progress")]})}),e.jsx(d,{value:"completed",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:u("completed")}}),s("maintenance.form.status.completed")]})}),e.jsx(d,{value:"cancelled",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:u("cancelled")}}),s("maintenance.form.status.cancelled")]})}),e.jsx(d,{value:"postponed",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:u("postponed")}}),s("maintenance.form.status.postponed")]})})]})]})]})]}),e.jsxs(r,{sx:{mt:3,backgroundColor:"white",p:2.5,borderRadius:2,border:"1px solid #e0e0e0"},children:[e.jsx(Y,{control:e.jsx(q,{checked:o.requires_external_service,onChange:a=>i("requires_external_service",a.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:t.color},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:t.color}}}),label:s("maintenance.form.external_service")}),o.requires_external_service&&e.jsxs(r,{sx:{mt:2,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:2},children:[e.jsx(l,{label:s("maintenance.form.external_provider"),value:o.external_provider,onChange:a=>i("external_provider",a.target.value),fullWidth:!0,sx:n}),e.jsx(l,{label:s("maintenance.form.parts_needed"),value:o.parts_needed,onChange:a=>i("parts_needed",a.target.value),fullWidth:!0,sx:n})]})]}),e.jsx(r,{sx:{mt:3},children:e.jsx(l,{label:s("maintenance.form.additional_notes"),value:o.notes,onChange:a=>i("notes",a.target.value),multiline:!0,rows:3,fullWidth:!0,sx:{...n,backgroundColor:"white"}})})]}),e.jsxs(O,{sx:{px:3,py:2,backgroundColor:"#fafafa"},children:[e.jsx(_,{onClick:m,variant:"outlined",startIcon:e.jsx(y,{}),sx:{borderRadius:"25px",px:5,py:1.2,textTransform:"uppercase",borderColor:"#1976D2",color:"#1976D2",fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.5px","&:hover":{borderColor:"#1976D2",backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:s("common.cancel")}),e.jsx(_,{onClick:R,disabled:v,variant:"contained",startIcon:e.jsx(H,{}),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",backgroundColor:"#1976D2",fontWeight:600,boxShadow:"0 2px 8px rgba(25, 118, 210, 0.25)","&:hover":{backgroundColor:"#1565C0",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.35)",transform:"translateY(-1px)"},"&:disabled":{backgroundColor:"#ccc"},transition:"all 0.3s ease"},children:s(v?"maintenance.form.saving":"maintenance.form.save_maintenance")})]})]})};export{ce as default};
