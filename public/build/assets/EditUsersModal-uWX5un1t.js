import{j as e}from"./ui-DPZ0E1vL.js";import{u as V}from"./use-translation-CoHJZkub.js";import{E as U}from"./Edit-xAXkYsFL.js";import{C as M}from"./Close-D1G5Ogik.js";import{T as w,a as Y}from"./TextField-shvFoP5C.js";import{I as D,V as F,a as B}from"./InputAdornment-CfS_hXAI.js";import{r as l}from"./inertia-sC_DM86S.js";import{M as G,B as m,T as g,I as C,b as W}from"./Modal-CTa5naK4.js";import{A as J}from"./Alert-FvNFgAts.js";import{F as K,S as Q}from"./Switch-BcopnTFx.js";import"./vendor-Y7T1HomI.js";import"./app-CypMkPja.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./useSlotProps-CDTHOMr-.js";const X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:600,bgcolor:"background.paper",border:"none",borderRadius:"24px",boxShadow:24,p:4,maxHeight:"90vh",overflowY:"auto"},Z={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"16px"},b={"& .MuiOutlinedInput-root":{borderRadius:"20px","& input":{padding:"8px 14px"},"& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#aaa"},"&.Mui-focused fieldset":{borderColor:"#1976d2"},"&.Mui-error fieldset":{borderColor:"#d32f2f"}},"& .MuiInputLabel-root":{transform:"translate(14px, 14px) scale(1)","&.Mui-focused, &.MuiFormLabel-filled":{transform:"translate(14px, -9px) scale(0.75)"}},"& .MuiFormHelperText-root":{marginLeft:"14px",marginRight:"14px",marginTop:"4px"}};function ue({open:c,onClose:j,onUpdate:P,user:i,errors:_={}}){const{t:o}=V(),[s,p]=l.useState({name:"",email:"",password:"",password_confirmation:"",active:!0}),[S,k]=l.useState(!1),[I,T]=l.useState(!1),[v,d]=l.useState({}),[R,u]=l.useState({});l.useEffect(()=>{c&&i&&(p({name:i.name||"",email:i.email||"",password:"",password_confirmation:"",active:i.active??!0}),d({}),u({}))},[c,i]),l.useEffect(()=>{c||(p({name:"",email:"",password:"",password_confirmation:"",active:!0}),d({}),u({}),k(!1),T(!1))},[c]);const x=r=>{const{name:a,value:t}=r.target;p(y=>({...y,[a]:t})),v[a]&&d(y=>({...y,[a]:void 0}))},h=r=>{const{name:a}=r.target;u(t=>({...t,[a]:!0})),a!=="active"&&q(a,s[a])},q=(r,a)=>{const t={...v};switch(r){case"name":a.trim()?delete t.name:t.name=o("users.errors.name_required");break;case"email":a.trim()?/\S+@\S+\.\S+/.test(a)?delete t.email:t.email=o("users.errors.email_invalid"):t.email=o("users.errors.email_required");break;case"password":a&&a.length<8?t.password=o("users.errors.password_min_length"):delete t.password;break;case"password_confirmation":s.password&&!a?t.password_confirmation=o("users.errors.password_confirmation_required"):s.password&&s.password!==a?t.password_confirmation=o("users.errors.password_mismatch"):delete t.password_confirmation;break}d(t)},L=()=>{const r={};return s.name.trim()||(r.name=o("users.errors.name_required")),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(r.email=o("users.errors.email_invalid")):r.email=o("users.errors.email_required"),s.password&&s.password.length<8&&(r.password=o("users.errors.password_min_length")),s.password&&!s.password_confirmation?r.password_confirmation=o("users.errors.password_confirmation_required"):s.password&&s.password!==s.password_confirmation&&(r.password_confirmation=o("users.errors.password_mismatch")),d(r),u({name:!0,email:!0,password:!0,password_confirmation:!0}),Object.keys(r).length===0},A=r=>{if(r.preventDefault(),!L())return;console.log("Datos del formulario a enviar:",s);const a={name:s.name,email:s.email,active:s.active};s.password&&(a.password=s.password,a.password_confirmation=s.password_confirmation),P(a)},O=()=>{p({name:"",email:"",password:"",password_confirmation:"",active:!0}),d({}),u({}),j()},z=()=>{k(r=>!r)},H=()=>{T(r=>!r)},E=r=>{r.preventDefault()},f=r=>v[r]||_[r],n=r=>!!f(r)&&!!R[r];return i?e.jsx(G,{open:c,onClose:j,children:e.jsxs(m,{sx:X,children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(m,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(m,{sx:{width:32,height:32,borderRadius:"50%",backgroundColor:"#1976d2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(U,{sx:{color:"white",fontSize:20}})}),e.jsx(g,{variant:"h5",component:"h2",sx:{fontWeight:"bold",color:"#1976d2"},children:o("users.edit")})]}),e.jsx(C,{onClick:j,sx:{color:"text.secondary","&:hover":{backgroundColor:"action.hover"}},"aria-label":o("common.close"),children:e.jsx(M,{})})]}),_.message&&e.jsx(J,{severity:"error",sx:{mb:2,borderRadius:2},children:_.message}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{style:Z,children:[e.jsx(w,{fullWidth:!0,label:o("users.name"),name:"name",value:s.name,onChange:x,onBlur:h,error:n("name"),helperText:n("name")?f("name"):"",sx:b,required:!0}),e.jsx(w,{fullWidth:!0,label:o("users.email"),name:"email",type:"email",value:s.email,onChange:x,onBlur:h,error:n("email"),helperText:n("email")?f("email"):"",sx:b,required:!0}),e.jsx(w,{fullWidth:!0,label:o("users.password"),name:"password",type:S?"text":"password",value:s.password,onChange:x,onBlur:h,error:n("password"),helperText:n("password")?f("password"):o("users.password_optional"),sx:b,InputProps:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(C,{"aria-label":"toggle password visibility",onClick:z,onMouseDown:E,edge:"end",children:S?e.jsx(F,{}):e.jsx(B,{})})})}}),e.jsx(w,{fullWidth:!0,label:o("users.confirm_password"),name:"password_confirmation",type:I?"text":"password",value:s.password_confirmation,onChange:x,onBlur:h,error:n("password_confirmation"),helperText:n("password_confirmation")?f("password_confirmation"):o("users.password_confirmation_optional"),sx:b,InputProps:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(C,{"aria-label":"toggle password visibility",onClick:H,onMouseDown:E,edge:"end",children:I?e.jsx(F,{}):e.jsx(B,{})})})}}),e.jsx(K,{control:e.jsx(Q,{checked:s.active,onChange:(r,a)=>p({...s,active:a}),color:"primary"}),label:s.active?o("status.active"):o("status.inactive"),sx:{mt:2,ml:2}})]}),e.jsxs(m,{sx:{mt:2,p:2,backgroundColor:"grey.50",borderRadius:2},children:[e.jsxs(g,{variant:"body2",color:"text.secondary",children:[e.jsxs("strong",{children:[o("users.id"),":"]})," ",i.id]}),e.jsxs(g,{variant:"body2",color:"text.secondary",children:[e.jsxs("strong",{children:[o("users.created"),":"]})," ",new Date(i.created_at).toLocaleDateString("es-CO")]}),e.jsx(g,{variant:"body2",color:"text.secondary",sx:{mt:1},children:e.jsx("em",{children:o("users.message")})})]}),e.jsxs(m,{display:"flex",gap:2,mt:3,children:[e.jsx(W,{variant:"outlined",fullWidth:!0,onClick:O,startIcon:e.jsx(M,{}),sx:{borderRadius:"25px",px:5,py:1.2,textTransform:"uppercase",borderColor:"#1976D2",color:"#1976D2",fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.5px","&:hover":{borderColor:"#1976D2",backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:o("common.cancel")}),e.jsx(W,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{borderRadius:"20px",height:"40px",minHeight:"40px",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:1},startIcon:e.jsx(Y,{}),children:o("common.update")})]})]})]})}):null}export{ue as default};
